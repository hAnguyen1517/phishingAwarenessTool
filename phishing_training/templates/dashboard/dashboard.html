{% extends 'dashboard/dashboard_base.html' %}
{% load static %}

{% block title %}Dashboard - Phishing Training{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock %}

{% block page_title %}Dashboard{% endblock %}

{% block content %}
    <div class="stats">
        <div class="stats-card">
            <h3>SRate</h3>
            {% if daily_averages %}
            <p class="stats-value">7.85%</p>
            <p class="stats-change">↑ 2.1% vs last week</p>
            <p class="stats-date">Reports from 1-12 Dec, 2024</p>
            <div class="chart-placeholder bar-chart">
                {{ daily_averages|safe }}
            </div>
            {% else %}
            <p class="stats-value">7.85%</p>
            <p class="stats-change">↑ 2.1% vs last week</p>
            <p class="stats-date">Reports from 1-12 Dec, 2024</p>
            <div class="chart-placeholder bar-chart">Bar Chart Placeholder</div>
            {% endif %}
            <a href="{% url 'report' %}" class="view-report">View Report</a>
        </div>
        <div class="stats-card">
            <h3>Total Reports</h3>

            {% if total_reports %}
            <p class="stats-date">From 1-30 February, 2025</p>
            <div class="chart-placeholder donut-chart">
                {{ total_reports|safe }}
            </div>
            {% else %}
            <p class="stats-date">From 1-30 February, 2025</p>
            <div class="chart-placeholder donut-chart">Donut Chart Placeholder</div>
            <div class="chart-legend">
                <span>Students <span class="legend-color" style="background-color: #4B5EAA;"></span> 40%</span>
                <span>Trainers <span class="legend-color" style="background-color: #6A7DD3;"></span> 32%</span>
                <span>Staff <span class="legend-color" style="background-color: #A9B6F0;"></span> 28%</span>
            </div>
            {% endif %}
            <a href="{% url 'report' %}" class="view-report">View Report</a>
        </div>
    </div>

    <div class="content">
        <div class="charts">
            <div class="chart-card">
                <h3>Your Rating</h3>
                <p>Lorem ipsum dolor sit amet, consectetur...</p>
                {% if total_reports %}
                <div class="chart-placeholder bubble-chart">
                    {{ user_rating|safe }}
                </div>
                {% else %}
                <div class="chart-placeholder bubble-chart">Bubble Chart Placeholder</div>
                {% endif %}
            </div>
        </div>
        <div class="card">
            <h3>Most Asked Questions</h3>
            <ul class="question-list">
                {% for question in questions %}
                <li><img src="https://via.placeholder.com/30" alt="User"> {{ question.question }}</li>
                {% endfor %}
            </ul>
        </div>
        <div class="card">
            <h3>Your Reports</h3>
            <p class="stats-value">2.568</p>
            <p class="stats-change">↓ 2.1% vs last week</p>
            <p class="stats-date">From 1-30 Jan, 2025</p>
            {% if total_reports %}
            <div class="chart-placeholder line-chart">
                {{ user_reports|safe }}

            </div>
            {% else %}
            <div class="chart-placeholder line-chart">Line Chart Placeholder</div>
            {% endif %}
            <a href="{% url 'report' %}" class="view-report">View Report</a>
        </div>
    </div>
{% endblock %}